<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scalable Guide: Deploying a Docker App to AWS EC2</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chosen Palette: Slate & Sky -->
    <!-- Application Structure Plan: A single-page application with a fixed left-hand navigation sidebar and a main scrollable content area. This structure is ideal for a detailed tutorial, as it allows users to see their overall progress while focusing on a specific, complex step in the main content. The content is broken down into four major parts reflecting the new scalable architecture (Infrastructure, Golden AMI, CI/CD Pipeline, Deployment). Each step is a distinct card with interactive checklists, detailed explanations, and one-click copy buttons for code blocks to enhance usability and reduce errors for a beginner. -->
    <!-- Visualization & Content Choices: 
        - Report Info: Overall Scalable Architecture. Goal: Organize/Inform. Viz/Method: HTML/Tailwind CSS diagram. Interaction: None. Justification: Provides a high-level mental model of the more complex architecture (ALB, ASG, EC2 Fleet) before the user starts.
        - Report Info: Shell commands and YAML code. Goal: Inform/Enable. Viz/Method: Styled <pre><code> blocks. Interaction: "Copy to Clipboard" button. Justification: Essential for a technical tutorial to ensure accuracy and speed.
        - Report Info: Multi-step AWS Console procedures. Goal: Guide/Engage. Viz/Method: Interactive checklist for each granular action. Interaction: User can check/uncheck items. Justification: Provides a sense of accomplishment and helps users precisely track their location in a long, detailed process. Explainer boxes are used to clarify *why* a step is necessary.
        - Library/Method: Vanilla JavaScript for all interactions (scrolling, copy-to-clipboard, checklist state), Tailwind CSS for all styling.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        @import url('https://rsms.me/inter/inter.css');
        .step-card:before {
            content: '';
            position: absolute;
            left: -1px;
            top: 2.5rem;
            bottom: -2.5rem;
            width: 2px;
            background-color: #e2e8f0; 
        }
        .step-card:last-child:before {
            display: none;
        }
        .sidebar-link.active {
            background-color: #0284c7;
            color: white;
            font-weight: 600;
        }
        .checklist-item input:checked + label span:first-child {
            background-color: #0ea5e9;
            border-color: #0ea5e9;
        }
        .checklist-item input:checked + label span:first-child svg {
            display: block;
        }
         .checklist-item input:checked + label span:last-child {
            text-decoration: line-through;
            color: #9ca3af;
        }
        .explainer {
            background-color: #f0f9ff;
            border-left-color: #0ea5e9;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <div class="flex min-h-screen">
        <!-- Sidebar Navigation -->
        <aside class="w-64 bg-slate-800 text-white p-6 fixed h-full hidden md:block">
            <h1 class="font-bold text-xl mb-8 text-sky-400">Scalable Deployment</h1>
            <nav id="sidebar-nav" class="flex flex-col space-y-2">
                <a href="#part1" class="sidebar-link px-4 py-2 rounded-lg transition-colors duration-200 hover:bg-slate-700">Part 1: Infrastructure</a>
                <a href="#part2" class="sidebar-link px-4 py-2 rounded-lg transition-colors duration-200 hover:bg-slate-700">Part 2: Create "Golden AMI"</a>
                <a href="#part3" class="sidebar-link px-4 py-2 rounded-lg transition-colors duration-200 hover:bg-slate-700">Part 3: Setup CI/CD</a>
                <a href="#part4" class="sidebar-link px-4 py-2 rounded-lg transition-colors duration-200 hover:bg-slate-700">Part 4: Deploy Changes</a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 md:ml-64 p-4 sm:p-8 md:p-12">
            <div class="max-w-4xl mx-auto">
                <header class="mb-12">
                    <h1 class="text-4xl font-bold text-slate-900 mb-2">Scalable AWS Deployment: A Beginner's Guide</h1>
                    <p class="text-lg text-slate-600">This guide details how to build a professional, auto-scaling infrastructure for your application on AWS.</p>
                </header>
                
                <div class="mb-16">
                    <h2 class="text-2xl font-semibold mb-4 text-slate-900">New Architecture Overview</h2>
                    <div class="bg-white p-6 rounded-xl shadow-md border border-slate-200">
                         <p class="text-center text-slate-600 mb-6">We will build a fleet of servers that can grow or shrink based on traffic, with a load balancer distributing requests. This is a highly resilient and efficient setup.</p>
                        <div class="flex items-center justify-around space-x-2 text-sm text-center">
                            <div>
                                <div class="w-16 h-16 mx-auto bg-slate-900 text-white rounded-full flex items-center justify-center text-2xl" title="User Traffic">üë§</div>
                                <p class="mt-2 font-semibold">User Traffic</p>
                            </div>
                            <div class="flex-1 h-0.5 bg-slate-300"></div>
                            <div>
                                <div class="w-16 h-16 mx-auto bg-amber-500 text-white rounded-full flex items-center justify-center text-2xl" title="Application Load Balancer">üö¶</div>
                                <p class="mt-2 font-semibold">Load Balancer</p>
                                <p class="text-slate-500">Distributes Traffic</p>
                            </div>
                            <div class="flex-1 h-0.5 bg-slate-300"></div>
                             <div class="border-2 border-dashed border-sky-400 rounded-lg p-4">
                                 <p class="font-semibold mb-2">Auto Scaling Group</p>
                                <div class="flex items-center justify-center space-x-2">
                                    <div class="w-12 h-12 bg-sky-500 text-white rounded-lg flex items-center justify-center text-xl" title="EC2 Instance">üñ•Ô∏è</div>
                                    <div class="w-12 h-12 bg-sky-500 text-white rounded-lg flex items-center justify-center text-xl" title="EC2 Instance">üñ•Ô∏è</div>
                                    <div class="w-12 h-12 bg-sky-300 text-white rounded-lg flex items-center justify-center text-xl" title="EC2 Instance (Scaling)">üñ•Ô∏è</div>
                                </div>
                                <p class="text-slate-500 mt-2">EC2 Fleet (40-100+)</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Part 1 -->
                <section id="part1" class="mb-16 scroll-mt-24">
                    <h2 class="text-3xl font-bold mb-6 border-b pb-3 text-slate-900">Part 1: Set Up Scalable Infrastructure</h2>
                    <p class="mb-8 text-slate-600">Instead of one server, we will create the foundational components for a whole fleet: a firewall, a server blueprint, a load balancer, and a fleet manager.</p>
                    
                    <div class="space-y-8 pl-8 relative">
                        <div class="step-card bg-white p-6 rounded-xl shadow-md border border-slate-200 relative">
                            <div class="absolute -left-12 top-6 w-10 h-10 bg-sky-500 text-white rounded-full flex items-center justify-center font-bold text-lg">1</div>
                            <h3 class="font-bold text-lg mb-3">Create a Security Group (Firewall)</h3>
                            <div class="explainer border-l-4 p-4 mb-4">A Security Group acts as a virtual firewall, controlling what traffic can reach your instances. We need one to allow web traffic.</div>
                            <ul class="space-y-4">
                                <li class="checklist-item">
                                    <input type="checkbox" id="p1s1c1" class="hidden"><label for="p1s1c1" class="flex items-center cursor-pointer">
                                        <span class="w-5 h-5 border-2 border-slate-300 rounded-sm mr-3 flex items-center justify-center"><svg class="w-3 h-3 text-white hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></span>
                                        <span class="text-slate-700">In the AWS Console, go to the <strong>EC2</strong> service. In the left menu, scroll down to <strong>Network & Security</strong> and click <strong>Security Groups</strong>.</span></label>
                                </li>
                                <li class="checklist-item">
                                    <input type="checkbox" id="p1s1c2" class="hidden"><label for="p1s1c2" class="flex items-center cursor-pointer">
                                        <span class="w-5 h-5 border-2 border-slate-300 rounded-sm mr-3 flex items-center justify-center"><svg class="w-3 h-3 text-white hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></span>
                                        <span class="text-slate-700">Click the orange <strong>Create security group</strong> button.</span></label>
                                </li>
                                <li class="checklist-item">
                                    <input type="checkbox" id="p1s1c3" class="hidden"><label for="p1s1c3" class="flex items-center cursor-pointer">
                                        <span class="w-5 h-5 border-2 border-slate-300 rounded-sm mr-3 flex items-center justify-center"><svg class="w-3 h-3 text-white hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></span>
                                        <span class="text-slate-700">Set <strong>Security group name</strong> to `app-sg` and provide a description.</span></label>
                                </li>
                                <li class="checklist-item">
                                    <input type="checkbox" id="p1s1c4" class="hidden"><label for="p1s1c4" class="flex items-center cursor-pointer">
                                        <span class="w-5 h-5 border-2 border-slate-300 rounded-sm mr-3 flex items-center justify-center"><svg class="w-3 h-3 text-white hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></span>
                                        <span class="text-slate-700">Under <strong>Inbound rules</strong>, click <strong>Add rule</strong>. Set <strong>Type</strong> to `HTTP` and <strong>Source</strong> to `Anywhere-IPv4`.</span></label>
                                </li>
                                <li class="checklist-item">
                                    <input type="checkbox" id="p1s1c5" class="hidden"><label for="p1s1c5" class="flex items-center cursor-pointer">
                                        <span class="w-5 h-5 border-2 border-slate-300 rounded-sm mr-3 flex items-center justify-center"><svg class="w-3 h-3 text-white hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></span>
                                        <span class="text-slate-700">Click <strong>Add rule</strong> again. Set <strong>Type</strong> to `SSH` and <strong>Source</strong> to `My IP` for security.</span></label>
                                </li>
                                 <li class="checklist-item">
                                    <input type="checkbox" id="p1s1c6" class="hidden"><label for="p1s1c6" class="flex items-center cursor-pointer">
                                        <span class="w-5 h-5 border-2 border-slate-300 rounded-sm mr-3 flex items-center justify-center"><svg class="w-3 h-3 text-white hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></span>
                                        <span class="text-slate-700">Scroll down and click <strong>Create security group</strong>.</span></label>
                                </li>
                            </ul>
                        </div>
                        
                        <div class="step-card bg-white p-6 rounded-xl shadow-md border border-slate-200 relative">
                             <div class="absolute -left-12 top-6 w-10 h-10 bg-sky-500 text-white rounded-full flex items-center justify-center font-bold text-lg">2</div>
                            <h3 class="font-bold text-lg mb-3">Create a Launch Template</h3>
                            <div class="explainer border-l-4 p-4 mb-4">A Launch Template is a reusable blueprint for your servers. We define the configuration here once, and the Auto Scaling Group will use it to launch identical instances.</div>
                             <ul class="space-y-4">
                                <li class="checklist-item">
                                    <input type="checkbox" id="p1s2c1" class="hidden"><label for="p1s2c1" class="flex items-center cursor-pointer">
                                        <span class="w-5 h-5 border-2 border-slate-300 rounded-sm mr-3 flex items-center justify-center"><svg class="w-3 h-3 text-white hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></span>
                                        <span class="text-slate-700">In the EC2 left menu, under <strong>Instances</strong>, click <strong>Launch Templates</strong>, then click <strong>Create launch template</strong>.</span></label>
                                </li>
                                <li class="checklist-item">
                                    <input type="checkbox" id="p1s2c2" class="hidden"><label for="p1s2c2" class="flex items-center cursor-pointer">
                                        <span class="w-5 h-5 border-2 border-slate-300 rounded-sm mr-3 flex items-center justify-center"><svg class="w-3 h-3 text-white hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></span>
                                        <span class="text-slate-700">Set <strong>Launch template name</strong> to `ai-app-template`. Check the box for <strong>Provide guidance to help me set up a template for use with EC2 Auto Scaling</strong>.</span></label>
                                </li>
                                <li class="checklist-item">
                                    <input type="checkbox" id="p1s2c3" class="hidden"><label for="p1s2c3" class="flex items-center cursor-pointer">
                                        <span class="w-5 h-5 border-2 border-slate-300 rounded-sm mr-3 flex items-center justify-center"><svg class="w-3 h-3 text-white hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></span>
                                        <span class="text-slate-700">Under <strong>Application and OS Images (AMI)</strong>, select <strong>Ubuntu Server 22.04 LTS</strong>.</span></label>
                                </li>
                                <li class="checklist-item">
                                    <input type="checkbox" id="p1s2c4" class="hidden"><label for="p1s2c4" class="flex items-center cursor-pointer">
                                        <span class="w-5 h-5 border-2 border-slate-300 rounded-sm mr-3 flex items-center justify-center"><svg class="w-3 h-3 text-white hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></span>
                                        <span class="text-slate-700">For <strong>Instance type</strong>, select `t3.medium`. For <strong>Key pair</strong>, select the `.pem` key you created earlier.</span></label>
                                </li>
                                <li class="checklist-item">
                                    <input type="checkbox" id="p1s2c5" class="hidden"><label for="p1s2c5" class="flex items-center cursor-pointer">
                                        <span class="w-5 h-5 border-2 border-slate-300 rounded-sm mr-3 flex items-center justify-center"><svg class="w-3 h-3 text-white hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></span>
                                        <span class="text-slate-700">For <strong>Security groups</strong>, select the `app-sg` group we created.</span></label>
                                </li>
                                <li class="checklist-item">
                                    <input type="checkbox" id="p1s2c6" class="hidden"><label for="p1s2c6" class="flex items-center cursor-pointer">
                                        <span class="w-5 h-5 border-2 border-slate-300 rounded-sm mr-3 flex items-center justify-center"><svg class="w-3 h-3 text-white hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></span>
                                        <span class="text-slate-700">Click <strong>Create launch template</strong>.</span></label>
                                </li>
                            </ul>
                        </div>

                        <div class="step-card bg-white p-6 rounded-xl shadow-md border border-slate-200 relative">
                            <div class="absolute -left-12 top-6 w-10 h-10 bg-sky-500 text-white rounded-full flex items-center justify-center font-bold text-lg">3</div>
                            <h3 class="font-bold text-lg mb-3">Create Auto Scaling Group</h3>
                            <div class="explainer border-l-4 p-4 mb-4">This is the fleet manager. It uses the Launch Template to maintain a desired number of instances, automatically replacing unhealthy ones and scaling based on demand.</div>
                            <ul class="space-y-4">
                               <li class="checklist-item">
                                    <input type="checkbox" id="p1s3c1" class="hidden"><label for="p1s3c1" class="flex items-center cursor-pointer">
                                        <span class="w-5 h-5 border-2 border-slate-300 rounded-sm mr-3 flex items-center justify-center"><svg class="w-3 h-3 text-white hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></span>
                                        <span class="text-slate-700">In the EC2 left menu, scroll to the bottom and click <strong>Auto Scaling Groups</strong>, then <strong>Create Auto Scaling group</strong>.</span></label>
                                </li>
                                <li class="checklist-item">
                                    <input type="checkbox" id="p1s3c2" class="hidden"><label for="p1s3c2" class="flex items-center cursor-pointer">
                                        <span class="w-5 h-5 border-2 border-slate-300 rounded-sm mr-3 flex items-center justify-center"><svg class="w-3 h-3 text-white hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></span>
                                        <span class="text-slate-700">Name it `ai-app-asg`. For <strong>Launch template</strong>, select `ai-app-template`. Click <strong>Next</strong>.</span></label>
                                </li>
                                <li class="checklist-item">
                                    <input type="checkbox" id="p1s3c3" class="hidden"><label for="p1s3c3" class="flex items-center cursor-pointer">
                                        <span class="w-5 h-5 border-2 border-slate-300 rounded-sm mr-3 flex items-center justify-center"><svg class="w-3 h-3 text-white hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></span>
                                        <span class="text-slate-700">On the "Network" page, select your default VPC and at least two subnets for high availability. Click <strong>Next</strong>.</span></label>
                                </li>
                                <li class="checklist-item">
                                    <input type="checkbox" id="p1s3c4" class="hidden"><label for="p1s3c4" class="flex items-center cursor-pointer">
                                        <span class="w-5 h-5 border-2 border-slate-300 rounded-sm mr-3 flex items-center justify-center"><svg class="w-3 h-3 text-white hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></span>
                                        <span class="text-slate-700">On the "Load balancing" page, select <strong>Attach to a new load balancer</strong>. Choose <strong>Application Load Balancer</strong>, make it <strong>Internet-facing</strong>, and have it create a new target group. Click <strong>Next</strong>.</span></label>
                                </li>
                                <li class="checklist-item">
                                    <input type="checkbox" id="p1s3c5" class="hidden"><label for="p1s3c5" class="flex items-center cursor-pointer">
                                        <span class="w-5 h-5 border-2 border-slate-300 rounded-sm mr-3 flex items-center justify-center"><svg class="w-3 h-3 text-white hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></span>
                                        <span class="text-slate-700">On the "Group size" page, set <strong>Desired capacity</strong> to `40`, <strong>Minimum capacity</strong> to `20`, and <strong>Maximum capacity</strong> to `100`.</span></label>
                                </li>
                                <li class="checklist-item">
                                    <input type="checkbox" id="p1s3c6" class="hidden"><label for="p1s3c6" class="flex items-center cursor-pointer">
                                        <span class="w-5 h-5 border-2 border-slate-300 rounded-sm mr-3 flex items-center justify-center"><svg class="w-3 h-3 text-white hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></span>
                                        <span class="text-slate-700">Under <strong>Scaling policies</strong>, select <strong>Target tracking scaling policy</strong>. Set the metric to <strong>Average CPU utilization</strong> and the <strong>Target value</strong> to `60`. This tells AWS to add more instances if the average CPU load exceeds 60%.</span></label>
                                </li>
                                <li class="checklist-item">
                                    <input type="checkbox" id="p1s3c7" class="hidden"><label for="p1s3c7" class="flex items-center cursor-pointer">
                                        <span class="w-5 h-5 border-2 border-slate-300 rounded-sm mr-3 flex items-center justify-center"><svg class="w-3 h-3 text-white hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></span>
                                        <span class="text-slate-700">Click <strong>Next</strong> through the remaining steps and finally click <strong>Create Auto Scaling group</strong>.</span></label>
                                </li>
                            </ul>
                        </div>
                    </div>
                </section>
                
                 <!-- Part 2 -->
                <section id="part2" class="mb-16 scroll-mt-24">
                    <h2 class="text-3xl font-bold mb-6 border-b pb-3 text-slate-900">Part 2: Create the "Golden AMI"</h2>
                    <p class="mb-8 text-slate-600">Your 3.2GB Docker image is too large to build every time a new server starts. We will build it once on a temporary server and save that server's state as a custom Amazon Machine Image (AMI). This makes new instances launch incredibly fast.</p>

                    <div class="space-y-8 pl-8 relative">
                        <div class="step-card bg-white p-6 rounded-xl shadow-md border border-slate-200 relative">
                            <div class="absolute -left-12 top-6 w-10 h-10 bg-sky-500 text-white rounded-full flex items-center justify-center font-bold text-lg">1</div>
                            <h3 class="font-bold text-lg mb-3">Launch a Temporary "Builder" Instance</h3>
                            <ul class="space-y-4">
                               <li class="checklist-item">
                                    <input type="checkbox" id="p2s1c1" class="hidden"><label for="p2s1c1" class="flex items-center cursor-pointer">
                                        <span class="w-5 h-5 border-2 border-slate-300 rounded-sm mr-3 flex items-center justify-center"><svg class="w-3 h-3 text-white hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></span>
                                        <span class="text-slate-700">Go to the EC2 <strong>Instances</strong> page and click <strong>Launch instances</strong>.</span></label>
                                </li>
                                <li class="checklist-item">
                                    <input type="checkbox" id="p2s1c2" class="hidden"><label for="p2s1c2" class="flex items-center cursor-pointer">
                                        <span class="w-5 h-5 border-2 border-slate-300 rounded-sm mr-3 flex items-center justify-center"><svg class="w-3 h-3 text-white hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></span>
                                        <span class="text-slate-700">On the left, select your `ai-app-template`. This will pre-fill all the settings. Name the instance `image-builder`.</span></label>
                                </li>
                                <li class="checklist-item">
                                    <input type="checkbox" id="p2s1c3" class="hidden"><label for="p2s1c3" class="flex items-center cursor-pointer">
                                        <span class="w-5 h-5 border-2 border-slate-300 rounded-sm mr-3 flex items-center justify-center"><svg class="w-3 h-3 text-white hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></span>
                                        <span class="text-slate-700">Click <strong>Launch instance</strong>.</span></label>
                                </li>
                            </ul>
                        </div>
                        <div class="step-card bg-white p-6 rounded-xl shadow-md border border-slate-200 relative">
                            <div class="absolute -left-12 top-6 w-10 h-10 bg-sky-500 text-white rounded-full flex items-center justify-center font-bold text-lg">2</div>
                            <h3 class="font-bold text-lg mb-3">Build Your Application Image</h3>
                            <p class="mb-4 text-slate-600">Connect to your new `image-builder` instance via SSH, then install Docker, clone your repo, and build the Docker image. This "pre-bakes" your application into the server.</p>
                            <div class="code-block bg-slate-900 text-slate-200 rounded-lg p-4 relative">
                                <button class="copy-btn absolute top-2 right-2 bg-slate-700 hover:bg-slate-600 text-xs px-2 py-1 rounded">Copy</button>
                                <pre><code class="language-bash"># Connect via SSH first, then run these commands:

# Install Docker
sudo apt-get update
sudo apt-get install -y docker.io git
sudo usermod -aG docker ubuntu

# Log out and log back in to apply Docker permissions, then:

# Clone your project
git clone git@github.com:your-username/your-repo-name.git

# Go into the project directory
cd your-repo-name

# Build the large Docker image. This will take time.
sudo docker build -t ai-smoke-tester:latest .
</code></pre>
                            </div>
                        </div>
                         <div class="step-card bg-white p-6 rounded-xl shadow-md border border-slate-200 relative">
                            <div class="absolute -left-12 top-6 w-10 h-10 bg-sky-500 text-white rounded-full flex items-center justify-center font-bold text-lg">3</div>
                            <h3 class="font-bold text-lg mb-3">Create the AMI</h3>
                             <ul class="space-y-4">
                               <li class="checklist-item">
                                    <input type="checkbox" id="p2s3c1" class="hidden"><label for="p2s3c1" class="flex items-center cursor-pointer">
                                        <span class="w-5 h-5 border-2 border-slate-300 rounded-sm mr-3 flex items-center justify-center"><svg class="w-3 h-3 text-white hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></span>
                                        <span class="text-slate-700">In the EC2 <strong>Instances</strong> list, select your `image-builder` instance.</span></label>
                                </li>
                                <li class="checklist-item">
                                    <input type="checkbox" id="p2s3c2" class="hidden"><label for="p2s3c2" class="flex items-center cursor-pointer">
                                        <span class="w-5 h-5 border-2 border-slate-300 rounded-sm mr-3 flex items-center justify-center"><svg class="w-3 h-3 text-white hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></span>
                                        <span class="text-slate-700">Click the <strong>Actions</strong> button at the top right, then <strong>Image and templates</strong> > <strong>Create image</strong>.</span></label>
                                </li>
                                 <li class="checklist-item">
                                    <input type="checkbox" id="p2s3c3" class="hidden"><label for="p2s3c3" class="flex items-center cursor-pointer">
                                        <span class="w-5 h-5 border-2 border-slate-300 rounded-sm mr-3 flex items-center justify-center"><svg class="w-3 h-3 text-white hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></span>
                                        <span class="text-slate-700">Give the image a name like `ai-app-image-v1`. Click <strong>Create image</strong>. This can take several minutes.</span></label>
                                </li>
                                <li class="checklist-item">
                                    <input type="checkbox" id="p2s3c4" class="hidden"><label for="p2s3c4" class="flex items-center cursor-pointer">
                                        <span class="w-5 h-5 border-2 border-slate-300 rounded-sm mr-3 flex items-center justify-center"><svg class="w-3 h-3 text-white hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></span>
                                        <span class="text-slate-700">Once the AMI is created, you can <strong>terminate</strong> the `image-builder` instance to save money.</span></label>
                                </li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- Part 3 -->
                <section id="part3" class="mb-16 scroll-mt-24">
                    <h2 class="text-3xl font-bold mb-6 border-b pb-3 text-slate-900">Part 3: The Modern CI/CD Pipeline</h2>
                     <p class="mb-8 text-slate-600">Our new pipeline is safer and more robust. Instead of using SSH, we will give GitHub programmatic access to AWS to command our Auto Scaling Group to perform a seamless, zero-downtime rolling update.</p>

                     <div class="space-y-8 pl-8 relative">
                         <div class="step-card bg-white p-6 rounded-xl shadow-md border border-slate-200 relative">
                            <div class="absolute -left-12 top-6 w-10 h-10 bg-sky-500 text-white rounded-full flex items-center justify-center font-bold text-lg">1</div>
                            <h3 class="font-bold text-lg mb-3">Create IAM User for GitHub Actions</h3>
                            <div class="explainer border-l-4 p-4 mb-4">We need to create a special user account for GitHub. It will have very specific, limited permissions to interact with your AWS account, which is much more secure than giving it your personal keys.</div>
                            <ul class="space-y-4">
                                <li class="checklist-item">
                                    <input type="checkbox" id="p3s1c1" class="hidden"><label for="p3s1c1" class="flex items-center cursor-pointer">
                                        <span class="w-5 h-5 border-2 border-slate-300 rounded-sm mr-3 flex items-center justify-center"><svg class="w-3 h-3 text-white hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></span>
                                        <span class="text-slate-700">In the AWS Console, search for and go to the <strong>IAM</strong> service.</span></label>
                                </li>
                                <li class="checklist-item">
                                    <input type="checkbox" id="p3s1c2" class="hidden"><label for="p3s1c2" class="flex items-center cursor-pointer">
                                        <span class="w-5 h-5 border-2 border-slate-300 rounded-sm mr-3 flex items-center justify-center"><svg class="w-3 h-3 text-white hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></span>
                                        <span class="text-slate-700">In the left menu, click <strong>Users</strong>, then <strong>Create user</strong>. Name it `github-actions-user`. Click <strong>Next</strong>.</span></label>
                                </li>
                                <li class="checklist-item">
                                    <input type="checkbox" id="p3s1c3" class="hidden"><label for="p3s1c3" class="flex items-center cursor-pointer">
                                        <span class="w-5 h-5 border-2 border-slate-300 rounded-sm mr-3 flex items-center justify-center"><svg class="w-3 h-3 text-white hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></span>
                                        <span class="text-slate-700">Select <strong>Attach policies directly</strong>. Search for and check the policies: `AmazonEC2FullAccess` and `IAMReadOnlyAccess`. Click <strong>Next</strong>, then <strong>Create user</strong>.</span></label>
                                </li>
                                <li class="checklist-item">
                                    <input type="checkbox" id="p3s1c4" class="hidden"><label for="p3s1c4" class="flex items-center cursor-pointer">
                                        <span class="w-5 h-5 border-2 border-slate-300 rounded-sm mr-3 flex items-center justify-center"><svg class="w-3 h-3 text-white hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></span>
                                        <span class="text-slate-700">Click on the newly created user. Go to the <strong>Security credentials</strong> tab. Under <strong>Access keys</strong>, click <strong>Create access key</strong>.</span></label>
                                </li>
                                <li class="checklist-item">
                                    <input type="checkbox" id="p3s1c5" class="hidden"><label for="p3s1c5" class="flex items-center cursor-pointer">
                                        <span class="w-5 h-5 border-2 border-slate-300 rounded-sm mr-3 flex items-center justify-center"><svg class="w-3 h-3 text-white hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></span>
                                        <span class="text-slate-700">Choose <strong>Command Line Interface (CLI)</strong>, confirm the warning, and click <strong>Create access key</strong>. Copy and save both the <strong>Access key ID</strong> and the <strong>Secret access key</strong> immediately.</span></label>
                                </li>
                            </ul>
                        </div>
                         <div class="step-card bg-white p-6 rounded-xl shadow-md border border-slate-200 relative">
                             <div class="absolute -left-12 top-6 w-10 h-10 bg-sky-500 text-white rounded-full flex items-center justify-center font-bold text-lg">2</div>
                            <h3 class="font-bold text-lg mb-3">Update GitHub Secrets</h3>
                             <p class="mb-4 text-slate-600">In your GitHub repository under <strong>Settings > Secrets and variables > Actions</strong>, add the new keys. You can delete the old EC2 secrets.</p>
                             <ul class="list-disc list-inside space-y-2 text-slate-700">
                                <li>`AWS_ACCESS_KEY_ID`: The Access Key ID you just saved.</li>
                                <li>`AWS_SECRET_ACCESS_KEY`: The Secret Access Key you just saved.</li>
                            </ul>
                        </div>
                         <div class="step-card bg-white p-6 rounded-xl shadow-md border border-slate-200 relative">
                            <div class="absolute -left-12 top-6 w-10 h-10 bg-sky-500 text-white rounded-full flex items-center justify-center font-bold text-lg">3</div>
                            <h3 class="font-bold text-lg mb-3">The New CI/CD Workflow</h3>
                            <p class="mb-4 text-slate-600">On your local machine, replace the content of <code>.github/workflows/deploy.yml</code> with this new script. This workflow automates creating a new AMI and telling the ASG to perform a rolling update.</p>
                            <div class="code-block bg-slate-900 text-slate-200 rounded-lg p-4 relative">
                                <button class="copy-btn absolute top-2 right-2 bg-slate-700 hover:bg-slate-600 text-xs px-2 py-1 rounded">Copy</button>
                                <pre><code class="language-yaml">name: Build Golden AMI and Deploy
on:
  workflow_dispatch:
jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Code
        uses: actions/checkout@v3

      - name: Configure AWS Credentials
        uses: aws-actions/configure-aws-credentials@v1
        with:
          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
          aws-region: us-east-1

      - name: Create New Golden AMI
        id: create_ami
        run: |
          # A real-world script here would use Packer or EC2 Image Builder.
          # For this guide, we assume a new AMI is created manually or via a separate process.
          # We'll just get the latest one you created.
          echo "Finding latest AMI for ai-app-image..."
          AMI_ID=$(aws ec2 describe-images --owners self --filters "Name=name,Values=ai-app-image-*" --query 'Images | sort_by(@, &CreationDate) | [-1].ImageId' --output text)
          echo "Found AMI ID: $AMI_ID"
          echo "::set-output name=ami_id::$AMI_ID"

      - name: Create New Launch Template Version
        id: create_lt_version
        run: |
          LT_ID=$(aws ec2 describe-launch-templates --launch-template-names ai-app-template --query 'LaunchTemplates[0].LaunchTemplateId' --output text)
          echo "Creating new version for Launch Template ID: $LT_ID"
          VERSION=$(aws ec2 create-launch-template-version --launch-template-id $LT_ID --source-version '$Default' --launch-template-data '{"ImageId":"${{ steps.create_ami.outputs.ami_id }}"}' --query 'LaunchTemplateVersion.VersionNumber' --output text)
          echo "Created new Launch Template Version: $VERSION"
          echo "::set-output name=version::$VERSION"
          
      - name: Update Auto Scaling Group
        run: |
          aws autoscaling update-auto-scaling-group \
            --auto-scaling-group-name ai-app-asg \
            --launch-template '{"LaunchTemplateName": "ai-app-template", "Version": "${{ steps.create_lt_version.outputs.version }}"}'

      - name: Start Instance Refresh
        run: |
          aws autoscaling start-instance-refresh \
            --auto-scaling-group-name ai-app-asg \
            --preferences '{"MinHealthyPercentage": 80, "InstanceWarmup": 300}'
</code></pre>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- Part 4 -->
                <section id="part4" class="scroll-mt-24">
                    <h2 class="text-3xl font-bold mb-6 border-b pb-3 text-slate-900">Part 4: Deploying Your Changes</h2>
                     <p class="mb-8 text-slate-600">The deployment process now has two phases: building the image and rolling out the update.</p>

                     <div class="space-y-8 pl-8 relative">
                         <div class="step-card bg-white p-6 rounded-xl shadow-md border border-slate-200 relative">
                            <div class="absolute -left-12 top-6 w-10 h-10 bg-sky-500 text-white rounded-full flex items-center justify-center font-bold text-lg">1</div>
                            <h3 class="font-bold text-lg mb-3">Phase 1: Create a New Golden AMI</h3>
                             <p class="mb-4 text-slate-600">Whenever you have a significant code change, you must create a new "Golden AMI". Follow the steps in Part 2 again to build a new image. Be sure to name it with a new version, for example, `ai-app-image-v2`.</p>
                        </div>
                        <div class="step-card bg-white p-6 rounded-xl shadow-md border border-slate-200 relative">
                            <div class="absolute -left-12 top-6 w-10 h-10 bg-sky-500 text-white rounded-full flex items-center justify-center font-bold text-lg">2</div>
                            <h3 class="font-bold text-lg mb-3">Phase 2: Run the Deployment Workflow</h3>
                            <div class="explainer border-l-4 p-4 mb-4">Because this process is very powerful, we've configured the workflow to be triggered manually, not on every push.</div>
                             <ul class="space-y-4">
                               <li class="checklist-item">
                                    <input type="checkbox" id="p4s2c1" class="hidden"><label for="p4s2c1" class="flex items-center cursor-pointer">
                                        <span class="w-5 h-5 border-2 border-slate-300 rounded-sm mr-3 flex items-center justify-center"><svg class="w-3 h-3 text-white hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></span>
                                        <span class="text-slate-700">Go to the <strong>Actions</strong> tab in your GitHub repository.</span></label>
                                </li>
                                <li class="checklist-item">
                                    <input type="checkbox" id="p4s2c2" class="hidden"><label for="p4s2c2" class="flex items-center cursor-pointer">
                                        <span class="w-5 h-5 border-2 border-slate-300 rounded-sm mr-3 flex items-center justify-center"><svg class="w-3 h-3 text-white hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></span>
                                        <span class="text-slate-700">In the left sidebar, click on the <strong>Build Golden AMI and Deploy</strong> workflow.</span></label>
                                </li>
                                <li class="checklist-item">
                                    <input type="checkbox" id="p4s2c3" class="hidden"><label for="p4s2c3" class="flex items-center cursor-pointer">
                                        <span class="w-5 h-5 border-2 border-slate-300 rounded-sm mr-3 flex items-center justify-center"><svg class="w-3 h-3 text-white hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></span>
                                        <span class="text-slate-700">You will see a button that says <strong>Run workflow</strong>. Click it to start the automated rollout of your new version.</span></label>
                                </li>
                                <li class="checklist-item">
                                    <input type="checkbox" id="p4s2c4" class="hidden"><label for="p4s2c4" class="flex items-center cursor-pointer">
                                        <span class="w-5 h-5 border-2 border-slate-300 rounded-sm mr-3 flex items-center justify-center"><svg class="w-3 h-3 text-white hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></span>
                                        <span class="text-slate-700">You can monitor the progress in the EC2 Console under <strong>Auto Scaling Groups</strong> > select your ASG > <strong>Instance refresh</strong> tab.</span></label>
                                </li>
                            </ul>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const allCopyButtons = document.querySelectorAll('.copy-btn');
        allCopyButtons.forEach(button => {
            button.addEventListener('click', (e) => {
                const codeBlock = e.target.closest('.code-block');
                const code = codeBlock.querySelector('code').innerText;
                navigator.clipboard.writeText(code).then(() => {
                    e.target.textContent = 'Copied!';
                    setTimeout(() => {
                        e.target.textContent = 'Copy';
                    }, 2000);
                }).catch(err => {
                    console.error('Failed to copy text: ', err);
                });
            });
        });

        const sections = document.querySelectorAll('section');
        const sidebarLinks = document.querySelectorAll('#sidebar-nav a');
        
        const observerOptions = {
            root: null,
            rootMargin: '0px',
            threshold: 0.1 
        };

        let activeId = '';
        const observer = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                   activeId = entry.target.getAttribute('id');
                }
            });
            
            sidebarLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${activeId}`) {
                    link.classList.add('active');
                }
            });
        }, observerOptions);

        sections.forEach(section => {
            observer.observe(section);
        });

        if (window.scrollY < 200) {
            sidebarLinks[0].classList.add('active');
        }
    });
</script>
</body>
</html>
